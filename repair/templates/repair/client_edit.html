{% extends "repair/base.html" %}
{% load staticfiles %}

{% block top_menu %}
  {% include "includes/top_menu.html" %}
{% endblock %}


{% block table_main %}
    <div class="row">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">Данные клиента</h3>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-sm-3 col-md-3">
                        <p>Наименование клиента:</p>
                        <p>{{ client.client_name }}</p>
                    </div>
                    <div class="col-sm-3 col-md-3">
                        <p>Контакты клиента:</p>
                        <p>{{ client.client_contact }}</p>
                    </div>
                    <div class="col-sm-3 col-md-3">
                        Корпоративный: {% if client.client_corp %}<span class="label label-success">Да</span>{% else %}<span class="label label-primary">Нет</span>{% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% if client.client_corp %}
    <div class="row">
        <div class="panel panel-default col-md-offset-2">
          <div class="panel-heading">
            <h3 class="panel-title">Отделения корпоративного клиента:</h3>
          </div>
          <div class="panel-body">
        {% if department %}
            <div class="table-responsive">
                <table class="table table-hover table-striped">
                  <thead>
                    <th>№ п/п</th>
                    <th>Название отделения клиента</th>
                  </thead>
            {% for dep in department %}
                <tr>
                    <td>{{ forloop.counter }}.</td>
                    <td>{{ dep.client_dep_name }}</td>
                </tr>
            {% endfor %}
                </table>
            </div>
        {% else %}
              Нет зарегистрированных отделений
        {% endif %}
            </div>
        </div>
    </div>
    {% endif %}
    <form role="form" class="form-horizontal" action="" method="post" autocomplete="off">
        {% csrf_token %}
        <h3>Редактируемые поля:</h3>
        <div class="form-group">
            <label class="control-label" for="{{ form.client_contact.name }}">{{ form.client_contact.label }}:</label>
            <textarea class="form-control" name="{{ form.client_contact.name }}" id="{{ form.client_contact.name }}" placeholder="{{ client.client_contact }}">{{ client.client_contact }}</textarea>
        </div>

        {% if client.client_corp %}
        <div id="dep_block" class="form-group">
<!--It`s place for insert new dep for client (code in action.js)-->
        </div>
        <div class="row">
        <input id="add_dep" type="button" class="btn btn-success" value="Добавить отделение"/>
        </div>
        {% endif %}
        <div class="row">
        <input type="submit" class="btn btn-info" id="sub_button" value="Сохранить"/>
        </div>
    </form>
{% endblock %}


{% block script_block %}
    <script src="{% static 'repair/js/action.js' %}"></script>
{% endblock %}